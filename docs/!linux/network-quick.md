---
title: Tour d'horizon
category: Linux, Network
---

## Interface réseau

* Pour trouver le nom de l'interface réseau:

  ``` bash
  ip link show  # Long version
  ip l          # Short version
  ```

* On peut voir que l'interface réseau wifi s'appelle wlp164s0

  ``` bash
  $ ip -br link show
  lo               UNKNOWN        00:00:00:00:00:00 <LOOPBACK,UP,LOWER_UP> 
  wlp164s0         UP             c8:cb:9e:b8:7b:cb <BROADCAST,MULTICAST,UP,LOWER_UP> 
  docker0          DOWN           02:42:17:c9:b6:7e <NO-CARRIER,BROADCAST,MULTICAST,UP>
  ```

## Adresse IP

* Pour voir les adresses IP configurées pour les différentes interfaces réseau:

    ``` bash
    ip addresses show
    ip a
    ```

* On peut voir que l'adresse IPv4 (inet) de l'interface WiFi est 192.168.1.4

  ``` bash
  $ ip -br addr show
  lo               UNKNOWN        127.0.0.1/8 ::1/128 
  wlp164s0         UP             192.168.1.4/24 2001:861:33c0:5740:539a:87d7:9c17:5ad7/64 2001:861:33c0:5740:f314:e7e8:65f9:8cbc/64 fe80::7e2e:17ed:912c:897b/64 
  docker0          DOWN           172.17.0.1/16
  ```

### Adresse réseau

* Le /24 est le CIDR (*Classless inter domain routing*): il indique que les 24 premiers bits de l'adresse constituent le préfixe du réseau, les 3 premiers octets (192.188.1) représentent donc l'adresse du réseau dans son ensemble. Le dernier octet (4) désigne l'appareil en cours sur ce réseau.

* Un nombre sur 8 bits peut aller de 0 à 255, les adresses IP du réseau vont donc de 192.168.1.0 et 192.168.1.255.
  Techniquement, le 0 et 255 sont réservés à des fins spéciales, donc les adresses des appareils sur ce réseau peuvent aller de 192.168.1.1 à 192.168.1.254.

## Table de routage

* Pour voir la table de routage:

  ``` bash
  ip route show
  ip r
  ```

* On peut voir que le routeur par défaut (default via) est 192.168.1.254

  ``` bash
  $ ip route show
  default via 192.168.1.254 dev wlp164s0 
  172.17.0.0/16 dev docker0 proto kernel scope link src 172.17.0.1 linkdown 
  192.168.1.0/24 dev wlp164s0 proto kernel scope link src 192.168.1.4
  ```

## Résolution DNS dynamique

* Un resolver permet de résoudre des noms d'hôte dynamiquement: si on cherche à joindre google.com, une requête sera envoyée au résolveur DNS configuré pour obtenir l'adresse IP de google.com — et le resolver répondra par exemple 203.0.113.9.

* Le resolver est configuré dans /etc/resolv.conf

  ``` bash
  cat /etc/resolv.conf
  # Generated by NetworkManager
  nameserver 8.8.8.8
  ```

  Chaque entrée commençant par nameserver est suivit de l'adresse IP d'un resolver.  
  Il est courant d'en voir figurer plusieurs, ce qui permet d'avoir une solution de secours si l'un d'entre eux ne répond pas.

## Résolution DNS statique

* La résolution DNS statique se fait via le fichier /etc/hosts.

  ``` bash
  $ cat /etc/hosts
  127.0.0.1    localhost localhost.localdomain
  ::1          localhost localhost.localdomain
  198.168.0.18 LFCS-CentOS2
  ```

  Chaque ligne contient une adresse IP suivit du ou des noms associés à cette IP.  
  Il peut s'agir de machines situées à l'intérieur ou à l'extérieur du réseau.
